<ion-header>
    <ion-toolbar class="bg-primary">
        <ion-buttons slot="end">
            <ion-button *ngIf="(user$ | async) === null" class="btn btn-light" (click)="showLoginForm()">Iniciar sesión</ion-button>
            <ion-button *ngIf="(user$ | async) !== null" class="btn btn-light" (click)="logout()">Cerrar sesión</ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>
<ion-content class="my-content">
    <div class="container container-sm mt-3 pb-5">
        <h1 class="text-center mb-4">Angular Camera App</h1>
        <div class="d-flex justify-content-center mb-4">
            <video #videoElement autoplay playsinline width="300" height="200"></video>
        </div>
        <div class="d-flex justify-content-center mb-4" width="300" height="200">
            <canvas #canvasElement></canvas>
        </div>

        <div class="d-flex justify-content-center mb-4">
            <ion-button class="btn btn-primary mr-2" (click)="capture()">Capturar foto</ion-button>
            <ion-button *ngIf="(user$ | async) !== null" class="btn btn-primary" (click)="uploadImage()">Subir foto</ion-button>
        </div>
        <table *ngIf="images.length > 0" class="table">
            <thead>
                <tr>
                    <th>Imagen</th>
                    <th>Nombre</th>
                    <th>Fecha</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let image of images">
                    <td><img [attr.src]="image" width="100" height="100" /></td>
                    <td>2</td>
                    <td>1</td>
                </tr>
            </tbody>
        </table>
    </div>
</ion-content>
<ion-footer>
    <h1>OK</h1>
</ion-footer>